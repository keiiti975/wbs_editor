<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>wbs_editor</title>
    <link href="css/main.css" rel="stylesheet" />
</head>

<body>
    <div id="editor_area"  style="white-space: nowrap; overflow-x: scroll; padding-bottom: 15px;">
        <div id="d0_area" class="depth_area">
            <div id="d0_name" class="depth_node">目的</div>
            <div id="d0_1" class="task_node">カレーライスを作る</div>
        </div>
        <div id="d1_area" class="depth_area">
            <div id="d1_name" class="depth_node">フェーズ</div>
            <div id="d1_1" class="task_node">カレーを煮込む</div>
        </div>
        <div id="d2_area" class="depth_area">
            <div id="d2_name" class="depth_node">タスク</div>
            <div id="d2_1" class="task_node">ニンジンを切る</div>
            <div id="d2_2" class="task_node">玉ねぎを切る</div>
            <div id="d2_3" class="task_node">ジャガイモを切る</div>
            <div id="d2_4" class="task_node">お米を研ぐ</div>
            <div id="d2_5" class="task_node">お米を水に浸す</div>
            <div id="d2_6" class="task_node">ご飯を炊く</div>
        </div>
    </div>

    <div id="footer_area">
        <a href="#" id="input_sentence" class="btn-circle-stitch">+</a>
        <a href="#" id="clear_sentences" class="btn-circle-stitch">-</a>
    </div>

    <script>
        const electron = require('electron');
        const { ipcRenderer } = electron;

        const editor_area = document.getElementById('editor_area');
        const insert = document.getElementById('input_sentence');
        const clear = document.getElementById('clear_sentences');

        // Request a input window
        insert.addEventListener('click', (event) => {
            ipcRenderer.send('inputWindow:create');
        });

        // Clear sentences
        clear.addEventListener('click', (event) => {
            editor_area.innerHTML = "";
        });

        // Insert sentence
        ipcRenderer.on('sentence:insert', (event, sentence) => {
            if (sentence.trim() === '') {
                return;
            }
            const text = document.createTextNode(sentence);
            const p = document.createElement('p');
            p.appendChild(text);
            editor_area.appendChild(p);
        });
    </script>
</body>

</html>